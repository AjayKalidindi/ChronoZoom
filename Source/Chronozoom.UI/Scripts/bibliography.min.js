var ChronoZoom;(function(n){(function(){function t(n,r,u){var f,s,e,o,h;try{f=getChild(r,u)}catch(c){return}s=vc.virtualCanvas("getViewport"),e=vcelementToNavString(r,s),window.location.hash.match("b=([a-z0-9_]+)")==null&&(o="&b="+u,window.location.hash.indexOf("@")==-1&&(o="@"+o),e=e+o),window.location.hash=e,f.onmouseclick=null,h=$("#bibliographyBack").css("display"),$("#bibliographyBack").css("display")=="none"?$("#bibliographyBack").show("clip",{},"slow",function(){f.onmouseclick=function(){return this.vc.element.css("cursor","default"),t({infodot:n.infodot,contentItems:n.contentItems},r,u),!0}}):f.onmouseclick=function(){return this.vc.element.css("cursor","default"),t({infodot:n.infodot,contentItems:n.contentItems},r,u),!0},$("#bibliography .sources").empty(),$("#bibliography .title").html("<span><\/span> &gt; Bibliography"),n&&(n.infodot?($("#bibliography .title span").html(n.infodot.title),i(n.infodot.guid,n.contentItems)):$("#bibliography .title span").html(""))}function i(t,i){n=t;var u=function(r){var s,e,u,o,f;if(t==n&&(s=$("#bibliography .sources"),s.empty(),r)){if(r.sort(function(n,t){return n.Authors&&t.Authors?n.Authors>t.Authors?1:-1:n.Authors?1:t.Authors?-1:n.Title&&t.Title?n.Title>t.Title?1:-1:n.Title?1:t.Title?-1:0}),r.length!=0)for($('<div class="sectionTitle" id="biblAdditionalResources">Additional Resources<\/div>').appendTo(s),e=0;e<r.length;e++)u=r[e],o=$('<div class="source"><\/div>').appendTo(s),$('<div class="sourceName"><a href="'+u.Source+'" target="_blank">'+u.Source+"<a/><\/div>").appendTo(o),f=u.Authors?u.Authors:"",u.Title&&(f!=""&&(f+="<br>"),f+="<i>"+u.Title+"<\/i>"),u.Publication&&(f!=""&&(f+="<br>"),f+=u.Publication),u.PublicationDates&&(f!=""&&(f+=", "),f+=u.PublicationDates),u.PageNumbers&&(f!=""&&(f+=", "),f+=u.PageNumbers),$('<div class="sourceDescr">'+f+"<\/div>").appendTo(o);if(i.length!=0)for($('<div class="sectionTitle" id="biblAdditionalResources">Current Resources<\/div>').appendTo(s),e=0;e<i.length;e++)u=i[e],o=$('<div class="source"><\/div>').appendTo(s),u.mediaSource?$('<div class="sourceName"><a href="'+u.mediaSource+'" target="_blank">'+u.mediaSource+"<a/><\/div>").appendTo(o):$("<br/>").appendTo(o),f="",u.title&&(f+="<i>"+u.title+"<\/i>"),u.attribution&&(f!=""&&(f+="<br>"),f+=u.attribution),$('<div class="sourceDescr">'+f+"<\/div>").appendTo(o)}},r;switch(czDataSource){case"db":r="Chronozoom.svc/GetBibliography";break;default:r="Chronozoom.svc/GetBibliographyRelay"}$.ajax({cache:!1,type:"GET",async:!0,dataType:"json",data:{exhibitID:t},url:r,success:function(result){czDataSource=="db"?u(result.d):u(eval(result.d))},error:function(n){alert("Error connecting to service: "+n.responseText)}})}var n=null})(n.Bibliography||(n.Bibliography={}));var t=n.Bibliography})(ChronoZoom||(ChronoZoom={}))