var ChronoZoom;(function(n){(function(t){function c(t){var i=n.Common.setVisibleByUserDirectly(t.newvisible);i&&(setNavigationStringTo={element:t.element,id:i})}function l(t){var i,r;t&&(i=n.UrlNav.navStringToVisible(t,$("#vc")),i&&(r=n.Common.setVisibleByUserDirectly(i),r&&(setNavigationStringTo={bookmark:t,id:r})))}function o(t){var i=a($("#vc").virtualCanvas("getLayerContent"),t),r;i?(r=n.VCContent.getVisibleForElement(i,1,$("#vc").virtualCanvas("getViewport")),c({element:i,newvisible:r})):alert("Element not found in the content.")}function a(n,t){var r=t.charAt(0)==="c",i=function(n,t){var e,u,f,o,s;if(n.id===t)return n;if(!n.children)return null;for(e=n.children.length,u=0;u<e;u++)if(f=n.children[u],f.id===t)return f;for(u=0;u<e;u++)if(f=n.children[u],o=i(f,t),o)return o;return r&&n.type==="infodot"&&(s=getContentItem(n,t),s!=null)?s:null};return i(n,t)}function e(n,t){var u,f,e;(h($("#searchTextBox")[0].value).indexOf(n)===0||n==="")&&(u=$("#search .searchResults").empty(),t==null||(t.length==0?$("<div class='searchNoResult'>No results<\/div>").appendTo(u):(f=function(n,i){for(var s=!0,r,e,f=0;f<t.length;f++)if(r=t[f],r.ObjectType==n){switch(r.ObjectType){case 0:e="e"+r.UniqueID;break;case 1:e="t"+r.UniqueID;break;case 2:e="c"+r.UniqueID;break;default:continue}s&&($("<div class='searchResultSection'>"+i+"<\/div>").appendTo(u),s=!1),$("<div class='searchResult' resultId='"+e+"'>"+t[f].Title+"<\/div>").appendTo(u).click(function(){o(this.getAttribute("resultId"))})}},f(1,"Timelines"),f(0,"Exhibits"),f(2,"Artifacts")))),r&&(r=!1),i!=null&&(e=i,i=null,s(e)),$("#loadingImage").fadeOut("slow")}function s(t){if(r){i=t;return}if(r=!0,!t||t===""){setTimeout(function(){e(t)},1);return}var u;switch(n.Settings.czDataSource){case"db":u="Chronozoom.svc/Search";break;default:u="Chronozoom.svc/SearchRelay"}$.ajax({cache:!1,type:"GET",async:!0,dataType:"json",data:{searchTerm:t},url:u,success:function(result){n.Settings.czDataSource=="db"?e(t,result.d):e(t,eval(result.d))},error:function(n){alert("Error connecting to service: "+n.responseText)}})}function h(n){return n===null?"":(n&&(n=n.replace(new RegExp('"',"g"),"")),n)}var u=!1,f=null,i,r;t.navigateToBookmark=l,t.goToSearchResult=o,i=null,r=!1})(n.Search||(n.Search={}));var t=n.Search})(ChronoZoom||(ChronoZoom={}))